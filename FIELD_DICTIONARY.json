{
  "version": "1.0",
  "generated_at": "2026-01-24T00:00:00+10:30",
  "notes": [
    "Field dictionary for technician inspection wizard (section-based).",
    "Each field supports status=answered|skipped and optional skip_reason/skip_note when skipped.",
    "Sections may be skipped based on gate logic; see section.gates."
  ],
  "enums": {
    "answer_status": [
      "answered",
      "skipped"
    ],
    "section_status": [
      "completed",
      "partial",
      "skipped"
    ],
    "skip_reason": [
      "no_access",
      "customer_declined",
      "locked",
      "unsafe",
      "tool_failed",
      "time_constraint",
      "not_applicable",
      "other"
    ],
    "client_type": [
      "owner",
      "landlord",
      "property_manager"
    ],
    "occupancy": [
      "vacant",
      "tenanted",
      "owner_occupied"
    ],
    "property_type": [
      "house",
      "unit",
      "townhouse",
      "other"
    ],
    "condition_grade": [
      "good",
      "fair",
      "poor"
    ],
    "yes_no_unsure": [
      "yes",
      "no",
      "unsure"
    ],
    "label_quality": [
      "good",
      "ok",
      "poor"
    ],
    "lighting_issue": [
      "none",
      "flicker",
      "heat_damage",
      "other"
    ],
    "rcd_exception_result": [
      "pass",
      "fail"
    ],
    "gpo_exception_issue": [
      "missing_earth",
      "polarity",
      "damage",
      "overheating",
      "loose",
      "other"
    ],
    "bonding": [
      "water",
      "gas",
      "na",
      "unsure"
    ],
    "protection_type": [
      "rcd",
      "rcbo",
      "mcb_only",
      "rewireable_fuses",
      "unknown"
    ]
  },
  "meta": {
    "inspection_id": {
      "type": "string",
      "required": false,
      "description": "Generated by backend on submit."
    },
    "created_at": {
      "type": "string",
      "required": false,
      "format": "date-time"
    },
    "technician": {
      "name": {
        "type": "string",
        "required": false
      },
      "licence_no": {
        "type": "string",
        "required": false
      }
    }
  },
  "sections": [
    {
      "id": "S0_START_CONTEXT",
      "title": "Start / Context",
      "status_field": "sections.S0_START_CONTEXT.status",
      "fields": [
        {
          "key": "job.address",
          "label": "Job address",
          "type": "string",
          "required": true,
          "skippable": false,
          "ui": "text"
        },
        {
          "key": "job.client_type",
          "label": "Client type",
          "type": "enum",
          "enum": "client_type",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "job.occupancy",
          "label": "Occupancy",
          "type": "enum",
          "enum": "occupancy",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "job.property_type",
          "label": "Property type",
          "type": "enum",
          "enum": "property_type",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "job.vulnerable_occupants",
          "label": "Vulnerable occupants",
          "type": "array_enum",
          "enum_values": [
            "seniors",
            "children",
            "disability",
            "none",
            "unsure"
          ],
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        },
        {
          "key": "job.reported_issues",
          "label": "Reported issues",
          "type": "array_enum",
          "enum_values": [
            "frequent_tripping",
            "burning_smell",
            "warm_outlets",
            "flickering_lights",
            "other",
            "none"
          ],
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        }
      ]
    },
    {
      "id": "S1_ACCESS_LIMITATIONS",
      "title": "Access & Limitations",
      "fields": [
        {
          "key": "access.switchboard_accessible",
          "label": "Switchboard accessible?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.roof_accessible",
          "label": "Roof space accessible?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.underfloor_accessible",
          "label": "Underfloor accessible?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.no_access_reason",
          "label": "If any above is No: reason",
          "type": "enum",
          "enum": "skip_reason",
          "required_when": "any(access.*_accessible==false)",
          "skippable": false,
          "ui": "select"
        },
        {
          "key": "access.mains_power_available",
          "label": "Mains power available for testing?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.photos_allowed",
          "label": "Photos allowed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.notes",
          "label": "Notes (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S2_SWITCHBOARD_OVERVIEW",
      "title": "Switchboard: Overview",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "switchboard.overall_condition",
          "label": "Overall condition",
          "type": "enum",
          "enum": "condition_grade",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.signs_of_overheating",
          "label": "Signs of overheating?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.burn_marks_or_carbon",
          "label": "Burn marks / carbon tracking?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.water_ingress",
          "label": "Water ingress / moisture signs?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.asbestos_suspected",
          "label": "Asbestos suspected?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.protection_types_present",
          "label": "Protection types present",
          "type": "array_enum",
          "enum": "protection_type",
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        },
        {
          "key": "switchboard.photo_ids",
          "label": "Photo IDs",
          "type": "array_string",
          "required": false,
          "skippable": true,
          "ui": "tags"
        }
      ]
    },
    {
      "id": "S3_SWITCHBOARD_CAPACITY_LABELS",
      "title": "Switchboard: Capacity & Labelling",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "switchboard.board_at_capacity",
          "label": "Board at capacity?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.spare_ways_available",
          "label": "Spare ways available?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.circuit_schedule_present",
          "label": "Circuit schedule present?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "switchboard.labelling_quality",
          "label": "Labelling quality",
          "type": "enum",
          "enum": "label_quality",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.non_standard_or_diy_observed",
          "label": "Non-standard / DIY work observed?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.notes",
          "label": "Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S4_EARTHING_MEN",
      "title": "Earthing & MEN",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "earthing.men_link_confirmed",
          "label": "MEN link visible/confirmed?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "earthing.main_earth_conductor_intact",
          "label": "Main earth conductor appears intact?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "earthing.earth_electrode_present",
          "label": "Earth electrode present?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "earthing.earth_resistance_measured",
          "label": "Earth resistance measured?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "earthing.earth_resistance_ohm",
          "label": "Earth resistance (Î©)",
          "type": "number",
          "required_when": "earthing.earth_resistance_measured==true",
          "min": 0,
          "max": 999,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "earthing.bonding_present",
          "label": "Bonding present",
          "type": "array_enum",
          "enum": "bonding",
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        },
        {
          "key": "earthing.photo_ids",
          "label": "Photo IDs / Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S5_RCD_TESTS_SUMMARY",
      "title": "RCD Tests: Summary",
      "fields": [
        {
          "key": "rcd_tests.performed",
          "label": "RCD testing performed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "rcd_tests.not_performed_reason",
          "label": "If No: reason",
          "type": "enum",
          "enum": "skip_reason",
          "required_when": "rcd_tests.performed==false",
          "skippable": false,
          "ui": "select"
        },
        {
          "key": "rcd_tests.summary.total_tested",
          "label": "Total devices tested",
          "type": "integer",
          "min": 0,
          "max": 99,
          "required_when": "rcd_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "rcd_tests.summary.total_pass",
          "label": "Total pass",
          "type": "integer",
          "min": 0,
          "max": 99,
          "required_when": "rcd_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "rcd_tests.summary.total_fail",
          "label": "Total fail",
          "type": "integer",
          "min": 0,
          "max": 99,
          "required_when": "rcd_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "rcd_tests.borderline_or_nuisance",
          "label": "Nuisance trip / borderline behaviour",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        },
        {
          "key": "rcd_tests.tester_info",
          "label": "Tester model/serial (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "text"
        }
      ],
      "clear_on_gate_change": [
        {
          "if_changed": "rcd_tests.performed",
          "from": true,
          "to": false,
          "clear_paths": [
            "rcd_tests.summary",
            "rcd_tests.exceptions"
          ]
        }
      ]
    },
    {
      "id": "S6_RCD_TESTS_EXCEPTIONS",
      "title": "RCD Tests: Exceptions",
      "gates": [
        {
          "depends_on": "rcd_tests.performed",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "not_applicable"
          }
        }
      ],
      "fields": [
        {
          "key": "rcd_tests.no_exceptions",
          "label": "No exceptions",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "rcd_tests.exceptions",
          "label": "Exceptions list",
          "type": "array_object",
          "required_when": "rcd_tests.no_exceptions==false",
          "skippable": true,
          "item_schema": {
            "device_id": {
              "type": "string",
              "required": false
            },
            "location": {
              "type": "string",
              "required": true
            },
            "test_current_ma": {
              "type": "integer",
              "required": false,
              "min": 0,
              "max": 300
            },
            "trip_time_ms": {
              "type": "integer",
              "required": false,
              "min": 0,
              "max": 5000
            },
            "result": {
              "type": "enum",
              "enum": "rcd_exception_result",
              "required": true
            },
            "notes": {
              "type": "string",
              "required": false
            },
            "photo_ids": {
              "type": "array_string",
              "required": false
            }
          },
          "ui": "repeatable_card"
        },
        {
          "key": "rcd_tests.notes",
          "label": "Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S7_GPO_LIGHTING_SUMMARY",
      "title": "GPO & Lighting: Summary",
      "fields": [
        {
          "key": "gpo_tests.performed",
          "label": "GPO testing performed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "gpo_tests.summary.total_gpo_tested",
          "label": "Total outlets tested",
          "type": "integer",
          "min": 0,
          "max": 999,
          "required_when": "gpo_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "gpo_tests.summary.polarity_pass",
          "label": "Polarity pass count",
          "type": "integer",
          "min": 0,
          "max": 999,
          "required_when": "gpo_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "gpo_tests.summary.earth_present_pass",
          "label": "Earth present pass count",
          "type": "integer",
          "min": 0,
          "max": 999,
          "required_when": "gpo_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "gpo_tests.summary.rcd_protection_confirmed",
          "label": "RCD protection confirmed count",
          "type": "integer",
          "min": 0,
          "max": 999,
          "required_when": "gpo_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "gpo_tests.any_warm_loose_damaged",
          "label": "Any warm/loose/damaged outlets noticed?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "lighting.issues_observed",
          "label": "Lighting issues observed",
          "type": "enum",
          "enum": "lighting_issue",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "gpo_tests.notes",
          "label": "Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ],
      "clear_on_gate_change": [
        {
          "if_changed": "gpo_tests.performed",
          "from": true,
          "to": false,
          "clear_paths": [
            "gpo_tests.summary",
            "gpo_tests.exceptions"
          ]
        }
      ]
    },
    {
      "id": "S8_GPO_LIGHTING_EXCEPTIONS",
      "title": "GPO & Lighting: Exceptions",
      "gates": [
        {
          "depends_on": "gpo_tests.performed",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "not_applicable"
          }
        }
      ],
      "fields": [
        {
          "key": "gpo_tests.no_exceptions",
          "label": "No exceptions",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "gpo_tests.exceptions",
          "label": "Exceptions list",
          "type": "array_object",
          "required_when": "gpo_tests.no_exceptions==false",
          "skippable": true,
          "item_schema": {
            "location": {
              "type": "string",
              "required": true
            },
            "issue": {
              "type": "enum",
              "enum": "gpo_exception_issue",
              "required": true
            },
            "notes": {
              "type": "string",
              "required": false
            },
            "photo_ids": {
              "type": "array_string",
              "required": false
            }
          },
          "ui": "repeatable_card"
        },
        {
          "key": "gpo_tests.photo_ids",
          "label": "Photo IDs (optional)",
          "type": "array_string",
          "required": false,
          "skippable": true,
          "ui": "tags"
        },
        {
          "key": "lighting.notes",
          "label": "Notes (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S9_SOLAR_BATTERY_EV",
      "title": "Solar / Battery / EV",
      "fields": [
        {
          "key": "assets.has_solar_pv",
          "label": "Has solar PV?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.has_battery",
          "label": "Has battery?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.has_ev_charger",
          "label": "Has EV charger?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.any_issues_observed",
          "label": "Any issues observed?",
          "type": "boolean",
          "required_when": "any(assets.has_solar_pv,assets.has_battery,assets.has_ev_charger)==true",
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.exceptions",
          "label": "Exceptions list",
          "type": "array_object",
          "required_when": "assets.any_issues_observed==true",
          "skippable": true,
          "item_schema": {
            "asset_type": {
              "type": "enum",
              "enum_values": [
                "solar",
                "battery",
                "ev"
              ],
              "required": true
            },
            "issue": {
              "type": "string",
              "required": true
            },
            "notes": {
              "type": "string",
              "required": false
            },
            "photo_ids": {
              "type": "array_string",
              "required": false
            }
          },
          "ui": "repeatable_card"
        },
        {
          "key": "assets.notes",
          "label": "Notes / Photo IDs",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ],
      "section_auto_skip": {
        "when": "assets.has_solar_pv==false && assets.has_battery==false && assets.has_ev_charger==false",
        "set": {
          "status": "skipped",
          "skip_reason": "not_applicable"
        },
        "clear_paths": [
          "assets.any_issues_observed",
          "assets.exceptions",
          "assets.notes"
        ]
      },
      "clear_on_gate_change": [
        {
          "if_changed": "assets.has_solar_pv",
          "from": true,
          "to": false,
          "clear_paths": [
            "assets.exceptions"
          ]
        },
        {
          "if_changed": "assets.has_battery",
          "from": true,
          "to": false,
          "clear_paths": [
            "assets.exceptions"
          ]
        },
        {
          "if_changed": "assets.has_ev_charger",
          "from": true,
          "to": false,
          "clear_paths": [
            "assets.exceptions"
          ]
        }
      ]
    },
    {
      "id": "S10_SIGNOFF",
      "title": "Sign-off",
      "fields": [
        {
          "key": "signoff.technician_name",
          "label": "Technician name",
          "type": "string",
          "required": true,
          "skippable": false,
          "ui": "text"
        },
        {
          "key": "signoff.licence_no",
          "label": "Licence number (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "text"
        },
        {
          "key": "signoff.inspection_completed",
          "label": "Inspection completed",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "signoff.customer_informed_immediate",
          "label": "Customer informed of any immediate concerns",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "signoff.office_notes_internal",
          "label": "Notes to office (internal)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        },
        {
          "key": "signoff.ready_for_report_generation",
          "label": "Ready for report generation",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "signoff.submit_confirm",
          "label": "Confirm submit",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        }
      ]
    }
  ],
  "api": {
    "submit_endpoint": {
      "method": "POST",
      "path": "/api/submitInspection",
      "request_content_type": "application/json",
      "response_example": {
        "inspection_id": "EH-YYYY-XXXX",
        "status": "accepted",
        "review_url": "/review/EH-YYYY-XXXX"
      }
    }
  }
}