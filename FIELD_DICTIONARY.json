{
  "version": "1.1",
  "generated_at": "2026-01-31T00:00:00+10:30",
  "notes": [
    "Aligned with On-Site Technical Checklist MASTER MERGED (Essential Electrical Report Field Data Standard).",
    "Section-based wizard; gate logic for skip; each field supports status=answered|skipped."
  ],
  "cross_field_validations": [
    {
      "id": "rcd_pass_fail_sum",
      "description": "RCD pass + fail must equal total tested",
      "condition": "rcd_tests.performed === true",
      "rule": "rcd_tests.summary.total_pass + rcd_tests.summary.total_fail === rcd_tests.summary.total_tested",
      "error_message": "Pass ({total_pass}) + Fail ({total_fail}) must equal Total Tested ({total_tested})",
      "fields": ["rcd_tests.summary.total_pass", "rcd_tests.summary.total_fail", "rcd_tests.summary.total_tested"]
    },
    {
      "id": "gpo_polarity_earth_sum",
      "description": "GPO polarity + earth pass cannot exceed total tested",
      "condition": "gpo_tests.performed === true",
      "rule": "gpo_tests.summary.polarity_pass <= gpo_tests.summary.total_gpo_tested && gpo_tests.summary.earth_present_pass <= gpo_tests.summary.total_gpo_tested",
      "error_message": "Pass counts cannot exceed Total Tested ({total_gpo_tested})",
      "fields": ["gpo_tests.summary.polarity_pass", "gpo_tests.summary.earth_present_pass", "gpo_tests.summary.total_gpo_tested"]
    }
  ],
  "on_issue_capture": {
    "description": "When a field has on_issue_capture=true and the answer indicates an issue (boolean=true OR enum=yes OR integer/number>0), the UI expands a sub-form to capture: location, photo(s), and optional notes. The captured data is stored as {field_key}_detail object.",
    "triggers": {
      "boolean": "value === true",
      "yes_no_unsure": "value === 'yes'",
      "integer": "value > 0",
      "number": "value > 0"
    },
    "detail_fields": {
      "location": { "type": "string", "label": "Location / Room", "required": true, "placeholder": "e.g. Kitchen, Bedroom 2, Garage, Main switchboard" },
      "photo_ids": { "type": "array_string", "label": "Photos (required)", "max": 2, "required": true },
      "notes": { "type": "string", "label": "Notes (optional)", "required": false }
    },
    "storage_pattern": "{field_key}_detail"
  },
  "enums": {
    "answer_status": [
      "answered",
      "skipped"
    ],
    "section_status": [
      "completed",
      "partial",
      "skipped"
    ],
    "skip_reason": [
      "no_access",
      "customer_declined",
      "locked",
      "unsafe",
      "tool_failed",
      "time_constraint",
      "not_applicable",
      "other"
    ],
    "client_type": [
      "owner",
      "landlord",
      "property_manager"
    ],
    "occupancy": [
      "vacant",
      "tenanted",
      "owner_occupied"
    ],
    "property_type": [
      "detached",
      "townhouse",
      "apartment",
      "unit",
      "commercial",
      "other"
    ],
    "year_built": [
      "before_1990",
      "1990_2005",
      "after_2005",
      "unknown"
    ],
    "supply_type": [
      "single_phase",
      "two_phase",
      "three_phase"
    ],
    "meter_type": [
      "accumulation_ferraris",
      "digital_smart",
      "mixed_unclear"
    ],
    "consumer_main_service": [
      "overhead",
      "over_under",
      "underground_pit"
    ],
    "service_fuse_location": [
      "eave",
      "stubby_pole",
      "meter_box",
      "service_pit"
    ],
    "main_switch_type": [
      "isolator",
      "circuit_breaker",
      "old_knife_rotary"
    ],
    "service_fuse_type": [
      "ceramic_rewireable",
      "cartridge",
      "not_accessible"
    ],
    "switchboard_location": [
      "indoor",
      "outdoor"
    ],
    "enclosure_condition": [
      "intact",
      "cracked",
      "broken_missing_cover"
    ],
    "rcd_type": [
      "type_a",
      "type_ac",
      "unknown"
    ],
    "backboard_material": [
      "timber",
      "plastic",
      "cement_sheet",
      "metal"
    ],
    "supply_cable_condition": [
      "good",
      "aged",
      "damaged"
    ],
    "cable_support_method": [
      "clips",
      "resting",
      "buried"
    ],
    "lamp_type": [
      "led",
      "halogen",
      "incandescent"
    ],
    "room_type": [
      "bedroom_1",
      "bedroom_2",
      "bedroom_3",
      "bedroom_4",
      "living_room",
      "dining_room",
      "kitchen",
      "bathroom_1",
      "bathroom_2",
      "laundry",
      "garage",
      "shed",
      "veranda",
      "balcony",
      "hallway",
      "office",
      "storeroom",
      "external_area",
      "other"
    ],
    "room_access": [
      "accessible",
      "not_accessible"
    ],
    "room_not_accessible_reason": [
      "no_key",
      "privacy",
      "religious",
      "other"
    ],
    "lighting_switch_issue": [
      "none",
      "fitting_overheat",
      "fitting_not_working",
      "switch_loose",
      "switch_arcing",
      "switch_unresponsive",
      "dimmer_not_working",
      "other"
    ],
    "smoke_alarm_type": [
      "photoelectric",
      "ionisation",
      "unknown"
    ],
    "smoke_alarm_power": [
      "mains",
      "battery",
      "both"
    ],
    "ev_charger_type": [
      "wall_mounted",
      "portable"
    ],
    "hot_water_type": [
      "storage",
      "instantaneous"
    ],
    "cooktop_type": [
      "electric_hotplate",
      "induction",
      "gas"
    ],
    "dishwasher_heat_type": [
      "electric",
      "gas"
    ],
    "oven_condition": [
      "ok",
      "fault",
      "not_tested"
    ],
    "ac_type": [
      "split",
      "ducted"
    ],
    "earth_test_method": [
      "clamp",
      "three_pole"
    ],
    "inverter_location": [
      "garage",
      "outdoor",
      "roof_space"
    ],
    "condition_grade": [
      "good",
      "fair",
      "poor"
    ],
    "yes_no_unsure": [
      "yes",
      "no",
      "unsure"
    ],
    "label_quality": [
      "good",
      "ok",
      "poor"
    ],
    "lighting_issue": [
      "none",
      "flicker",
      "heat_damage",
      "other"
    ],
    "light_fitting_type": [
      "downlight",
      "batten",
      "pendant",
      "led_panel",
      "strip",
      "other"
    ],
    "rcd_exception_result": [
      "pass",
      "fail"
    ],
    "gpo_exception_issue": [
      "missing_earth",
      "polarity",
      "damage",
      "overheating",
      "loose",
      "other"
    ],
    "gpo_room_issue": [
      "none",
      "missing_earth",
      "polarity_reversed",
      "no_power",
      "loose",
      "plug_disengages",
      "cracks_visible",
      "burn_marks",
      "damage",
      "overheating",
      "surface_warm",
      "other"
    ],
    "bonding": [
      "water",
      "gas",
      "na",
      "unsure"
    ],
    "protection_type": [
      "rcd",
      "rcbo",
      "mcb_only",
      "rewireable_fuses",
      "unknown"
    ]
  },
  "meta": {
    "inspection_id": {
      "type": "string",
      "required": false,
      "description": "Generated by backend on submit."
    },
    "created_at": {
      "type": "string",
      "required": false,
      "format": "date-time"
    },
    "technician": {
      "name": {
        "type": "string",
        "required": false
      },
      "licence_no": {
        "type": "string",
        "required": false
      }
    }
  },
  "sections": [
    {
      "id": "S0_START_CONTEXT",
      "title": "Start / Context",
      "status_field": "sections.S0_START_CONTEXT.status",
      "fields": [
        {
          "key": "job.address",
          "label": "Property address",
          "type": "string",
          "required": true,
          "skippable": false,
          "ui": "address_autocomplete"
        },
        {
          "key": "job.client_type",
          "label": "Client type",
          "type": "enum",
          "enum": "client_type",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "job.occupancy",
          "label": "Occupancy",
          "type": "enum",
          "enum": "occupancy",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "job.property_type",
          "label": "Property type",
          "type": "enum",
          "enum": "property_type",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "job.year_built",
          "label": "Approx. year built",
          "type": "enum",
          "enum": "year_built",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "job.vulnerable_occupants",
          "label": "Vulnerable occupants",
          "type": "array_enum",
          "enum_values": [
            "seniors",
            "children",
            "disability",
            "none",
            "unsure"
          ],
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        },
        {
          "key": "job.reported_issues",
          "label": "Reported issues",
          "type": "array_enum",
          "enum_values": [
            "frequent_tripping",
            "burning_smell",
            "warm_outlets",
            "flickering_lights",
            "other",
            "none"
          ],
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        }
      ]
    },
    {
      "id": "S1_ACCESS_LIMITATIONS",
      "title": "Access & Limitations",
      "fields": [
        {
          "key": "access.switchboard_accessible",
          "label": "Switchboard accessible?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.roof_accessible",
          "label": "Roof space accessible?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.underfloor_accessible",
          "label": "Underfloor accessible?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.no_access_reason",
          "label": "If any above is No: reason",
          "type": "enum",
          "enum": "skip_reason",
          "required_when": "any(access.*_accessible==false)",
          "skippable": false,
          "ui": "select"
        },
        {
          "key": "access.mains_power_available",
          "label": "Mains power available for testing?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.photos_allowed",
          "label": "Photos allowed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "access.notes",
          "label": "Notes (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S2_SUPPLY_OVERVIEW",
      "title": "Supply & Distribution – Supply Overview",
      "fields": [
        {
          "key": "supply.supply_type",
          "label": "Supply type",
          "type": "enum",
          "enum": "supply_type",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "supply.nominal_voltage",
          "label": "Nominal supply voltage displayed",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "supply.meter_type",
          "label": "Meter type",
          "type": "enum",
          "enum": "meter_type",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "supply.consumer_main_service_type",
          "label": "Consumer's main service type",
          "type": "enum",
          "enum": "consumer_main_service",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "supply.service_fuse_location",
          "label": "Service fuse location",
          "type": "enum",
          "enum": "service_fuse_location",
          "required": true,
          "skippable": false,
          "ui": "radio"
        }
      ]
    },
    {
      "id": "S2_MAIN_SWITCH",
      "title": "Supply & Distribution – Main Switch & Incoming Supply",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "switchboard.main_switch_present",
          "label": "Normal supply main switch present?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "switchboard.main_switch_rating_a",
          "label": "Main switch rating (A)",
          "type": "integer",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "switchboard.main_switch_count",
          "label": "Number of main switches",
          "type": "integer",
          "min": 0,
          "max": 10,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "switchboard.main_switch_type",
          "label": "Main switch type",
          "type": "enum",
          "enum": "main_switch_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "switchboard.service_fuse_rating_a",
          "label": "Service fuse rating (A) if visible",
          "type": "integer",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "switchboard.service_fuse_type",
          "label": "Service fuse type",
          "type": "enum",
          "enum": "service_fuse_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        }
      ]
    },
    {
      "id": "S2_SWITCHBOARD_OVERVIEW",
      "title": "Switchboard: Enclosure, Backboard & Operational",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "switchboard.overall_condition",
          "label": "Overall condition",
          "type": "enum",
          "enum": "condition_grade",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.signs_of_overheating",
          "label": "Signs of overheating?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.burn_marks_or_carbon",
          "label": "Burn marks / carbon tracking?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.water_ingress",
          "label": "Water ingress / moisture signs?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.asbestos_suspected",
          "label": "Asbestos suspected?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.protection_types_present",
          "label": "Protection types present",
          "type": "array_enum",
          "enum": "protection_type",
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        },
        {
          "key": "switchboard.location",
          "label": "Switchboard location",
          "type": "enum",
          "enum": "switchboard_location",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "switchboard.enclosure_condition",
          "label": "Enclosure condition",
          "type": "enum",
          "enum": "enclosure_condition",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "switchboard.ip_rating_marked",
          "label": "IP rating marked?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "switchboard.dust_insect_contamination",
          "label": "Dust/insect/spider contamination?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.backboard_material",
          "label": "Backboard material",
          "type": "enum",
          "enum": "backboard_material",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "switchboard.rcd_type",
          "label": "RCD type",
          "type": "enum",
          "enum": "rcd_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "switchboard.rcbo_installed",
          "label": "RCBOs installed?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "switchboard.circuits_without_rcd",
          "label": "Any circuits without RCD protection?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "switchboard.grease_oil_contamination",
          "label": "Grease/oil contamination?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.loose_components_visible",
          "label": "Loose components visible?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.photo_ids",
          "label": "Photo IDs (overall, main switch, MEN, damage, asbestos)",
          "type": "array_string",
          "required": false,
          "skippable": true,
          "ui": "tags"
        }
      ]
    },
    {
      "id": "S3_SWITCHBOARD_CAPACITY_LABELS",
      "title": "Switchboard: Capacity & Labelling",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "switchboard.board_at_capacity",
          "label": "Board at capacity?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.spare_ways_available",
          "label": "Spare ways available?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.spare_ways_count",
          "label": "Spare ways (if yes)",
          "type": "integer",
          "min": 0,
          "max": 50,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "switchboard.circuit_schedule_present",
          "label": "Circuit schedule present?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "switchboard.labelling_quality",
          "label": "Labelling quality",
          "type": "enum",
          "enum": "label_quality",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.non_standard_or_diy_observed",
          "label": "Non-standard / DIY work observed?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "switchboard.notes",
          "label": "Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S4_EARTHING_MEN",
      "title": "Earthing & MEN",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "earthing.men_link_confirmed",
          "label": "MEN link visible/confirmed?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "earthing.main_earth_conductor_intact",
          "label": "Main earth conductor appears intact?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "earthing.earth_electrode_present",
          "label": "Earth electrode present?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": true,
          "skippable": false,
          "ui": "radio"
        },
        {
          "key": "earthing.earth_resistance_measured",
          "label": "Earth resistance measured?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "earthing.earth_resistance_ohm",
          "label": "Earth resistance (Ω)",
          "type": "number",
          "required_when": "earthing.earth_resistance_measured==true",
          "min": 0,
          "max": 999,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "earthing.bonding_present",
          "label": "Bonding present",
          "type": "array_enum",
          "enum": "bonding",
          "required": true,
          "skippable": false,
          "ui": "checkboxes"
        },
        {
          "key": "earthing.men_accessible",
          "label": "MEN accessible?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "earthing.main_earth_size_adequate",
          "label": "Main earth conductor size appears adequate?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "earthing.bare_earth_in_use",
          "label": "Bare earth in use?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "earthing.earth_bar_present",
          "label": "Earth bar present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "earthing.neutral_bar_present",
          "label": "Neutral bar present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "earthing.earth_neutral_mixed_downstream",
          "label": "Earth & neutral mixed downstream?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "earthing.main_earthing_conductor_size_mm2",
          "label": "Main earthing conductor size (mm²)",
          "type": "number",
          "min": 0,
          "max": 100,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "earthing.photo_ids",
          "label": "Photo IDs / Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S4_CABLES_LEGACY",
      "title": "Supply & Distribution – Cables, Entries & Legacy Items",
      "gates": [
        {
          "depends_on": "access.switchboard_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "switchboard.supply_cable_condition",
          "label": "Supply cable condition",
          "type": "enum",
          "enum": "supply_cable_condition",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "switchboard.cracked_brittle_insulation",
          "label": "Cracked/brittle insulation?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.unprotected_cable_entries",
          "label": "Unprotected cable entries (no grommet)?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.exposed_single_insulated",
          "label": "Exposed single insulated conductors?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.incorrect_colour_identification",
          "label": "Incorrect colour identification?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.ceramic_fuse_holders_present",
          "label": "Ceramic fuse holders present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.rewireable_fuses_present",
          "label": "Rewireable fuses present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "switchboard.mixed_old_new_devices",
          "label": "Mixed old & new devices?",
          "type": "enum",
          "enum": "yes_no_unsure",
          "required": false,
          "skippable": true,
          "ui": "radio",
          "on_issue_capture": true
        }
      ]
    },
    {
      "id": "S5_RCD_TESTS_SUMMARY",
      "title": "RCD Tests: Summary",
      "fields": [
        {
          "key": "rcd_tests.performed",
          "label": "RCD testing performed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "rcd_tests.not_performed_reason",
          "label": "If No: reason",
          "type": "enum",
          "enum": "skip_reason",
          "required_when": "rcd_tests.performed==false",
          "skippable": false,
          "ui": "select"
        },
        {
          "key": "rcd_tests.summary.total_tested",
          "label": "Total devices tested",
          "type": "integer",
          "min": 0,
          "max": 99,
          "required_when": "rcd_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "rcd_tests.summary.total_pass",
          "label": "Total pass",
          "type": "integer",
          "min": 0,
          "max": 99,
          "required_when": "rcd_tests.performed==true",
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "rcd_tests.summary.total_fail",
          "label": "Total fail",
          "type": "integer",
          "min": 0,
          "max": 99,
          "required_when": "rcd_tests.performed==true",
          "skippable": true,
          "ui": "number",
          "on_issue_capture": true
        },
        {
          "key": "rcd_tests.borderline_or_nuisance",
          "label": "Nuisance trip / borderline behaviour",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        },
        {
          "key": "rcd_tests.tester_info",
          "label": "Tester model/serial (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "text"
        }
      ],
      "clear_on_gate_change": [
        {
          "if_changed": "rcd_tests.performed",
          "from": true,
          "to": false,
          "clear_paths": [
            "rcd_tests.summary",
            "rcd_tests.exceptions"
          ]
        }
      ]
    },
    {
      "id": "S6_RCD_TESTS_EXCEPTIONS",
      "title": "RCD Tests: Exceptions",
      "gates": [
        {
          "depends_on": "rcd_tests.performed",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "not_applicable"
          }
        }
      ],
      "fields": [
        {
          "key": "rcd_tests.no_exceptions",
          "label": "No exceptions",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "rcd_tests.exceptions",
          "label": "Exceptions list",
          "type": "array_object",
          "required_when": "rcd_tests.no_exceptions==false",
          "skippable": true,
          "item_schema": {
            "device_id": {
              "type": "string",
              "required": false
            },
            "location": {
              "type": "string",
              "required": true
            },
            "test_current_ma": {
              "type": "integer",
              "required": false,
              "min": 0,
              "max": 300
            },
            "trip_time_ms": {
              "type": "integer",
              "required": false,
              "min": 0,
              "max": 5000
            },
            "result": {
              "type": "enum",
              "enum": "rcd_exception_result",
              "required": true
            },
            "notes": {
              "type": "string",
              "required": false
            },
            "photo_ids": {
              "type": "array_string",
              "required": false
            }
          },
          "ui": "repeatable_card"
        },
        {
          "key": "rcd_tests.notes",
          "label": "Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S7A_GPO_BY_ROOM",
      "title": "GPO Testing by Room",
      "fields": [
        {
          "key": "gpo_tests.performed",
          "label": "GPO testing performed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "gpo_tests.rooms",
          "label": "GPO by room – add room, then submit to add row",
          "type": "array_object",
          "required_when": "gpo_tests.performed==true",
          "skippable": true,
          "helper_text": "Select Access: 可进入 (default) or 不可进入. If 可进入: tested ≤ total; when pass < tested, Issue + photo required. For Kitchen/Laundry/Bathroom: fill distance to sink and add photo of GPO/sink zone.",
          "item_schema": {
            "room_type": { "type": "enum", "enum": "room_type", "required": true, "label": "Room" },
            "room_name_custom": { "type": "string", "required": false, "label": "Room name (if Other)" },
            "room_access": { "type": "enum", "enum": "room_access", "required": false, "label": "Access (default: accessible)" },
            "room_not_accessible_reason": { "type": "enum", "enum": "room_not_accessible_reason", "required": false, "label": "Reason (when not accessible)" },
            "room_not_accessible_reason_other": { "type": "string", "required": false, "label": "Reason (when Other)" },
            "gpo_count": { "type": "integer", "required": true, "label": "GPO count", "min": 0, "max": 999 },
            "tested_count": { "type": "integer", "required": true, "label": "Tested count", "min": 0, "max": 999 },
            "pass_count": { "type": "integer", "required": true, "label": "Pass count", "min": 0, "max": 999 },
            "issue": { "type": "enum", "enum": "gpo_room_issue", "required": false, "label": "Issue" },
            "issue_other": { "type": "string", "required": false, "label": "Describe issue (when Other)" },
            "note": { "type": "string", "required": false, "label": "Note" },
            "distance_to_sink_mm": { "type": "integer", "required": false, "label": "Distance from GPO to sink/tap edge (mm)", "min": 0, "max": 2000 },
            "sink_position_notes": { "type": "string", "required": false, "label": "Position relative to sink (if not measured)" },
            "photo_ids": { "type": "array_string", "required": false, "label": "Photo evidence (required when Issue not None; for kitchen/laundry/bathroom also require sink zone photo)" }
          },
          "ui": "gpo_room_table"
        },
        {
          "key": "gpo_tests.notes",
          "label": "Notes",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ],
      "clear_on_gate_change": [
        {
          "if_changed": "gpo_tests.performed",
          "from": true,
          "to": false,
          "clear_paths": [
            "gpo_tests.rooms",
            "gpo_tests.summary",
            "gpo_tests.exceptions"
          ]
        }
      ]
    },
    {
      "id": "S8_GPO_LIGHTING_EXCEPTIONS",
      "title": "GPO/Lighting 例外 (Exceptions)",
      "gates": [
        {
          "depends_on": "gpo_tests.performed",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "not_applicable"
          }
        }
      ],
      "fields": [
        {
          "key": "gpo_tests.no_exceptions",
          "label": "No exceptions",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "gpo_tests.exceptions",
          "label": "Exceptions list",
          "type": "array_object",
          "required_when": "gpo_tests.no_exceptions==false",
          "skippable": true,
          "helper_text": "When pass count < total tested, failures exist. Add one exception per failed outlet with: Location (e.g. Kitchen, Bedroom 2), Issue type, and Photos (required for each).",
          "item_schema": {
            "location": {
              "type": "string",
              "required": true,
              "label": "Location / Room"
            },
            "issue": {
              "type": "enum",
              "enum": "gpo_exception_issue",
              "required": true,
              "label": "Issue type"
            },
            "notes": {
              "type": "string",
              "required": false,
              "label": "Notes (optional)"
            },
            "photo_ids": {
              "type": "array_string",
              "required": false,
              "label": "Photos (required when failures detected)"
            }
          },
          "ui": "repeatable_card"
        },
        {
          "key": "gpo_tests.photo_ids",
          "label": "Photo IDs (optional)",
          "type": "array_string",
          "required": false,
          "skippable": true,
          "ui": "tags"
        },
        {
          "key": "lighting.notes",
          "label": "Notes (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ]
    },
    {
      "id": "S7B_LIGHTING_BY_ROOM",
      "title": "灯具按房 (Lighting by Room)",
      "fields": [
        {
          "key": "lighting.rooms",
          "label": "灯具按房 – 选房间、可进入性、问题与照片后点击「Add to table」",
          "type": "array_object",
          "required": false,
          "skippable": true,
          "helper_text": "可进入：选房间 → 勾选问题（灯具过热、不工作、开关松动、打火、调光异常等）→ 有问题时必附照片。不可进入：选原因。",
          "item_schema": {
            "room_type": { "type": "enum", "enum": "room_type", "required": true, "label": "Room" },
            "room_name_custom": { "type": "string", "required": false, "label": "Room name (if Other)" },
            "room_access": { "type": "enum", "enum": "room_access", "required": false, "label": "Access (default: accessible)" },
            "room_not_accessible_reason": { "type": "enum", "enum": "room_not_accessible_reason", "required": false, "label": "Reason (when not accessible)" },
            "room_not_accessible_reason_other": { "type": "string", "required": false, "label": "Reason (when Other)" },
            "issues": { "type": "array_string", "required": false, "label": "Issues (lighting/switch)" },
            "issue_other": { "type": "string", "required": false, "label": "Describe issue (when Other)" },
            "photo_ids": { "type": "array_string", "required": false, "label": "Photo evidence (required when issues present)" },
            "note": { "type": "string", "required": false, "label": "Note" }
          },
          "ui": "lighting_room_table"
        }
      ]
    },
    {
      "id": "S3B_LIGHTING_SWITCHES",
      "title": "Internal Installation – Lighting & Switches",
      "fields": [
        {
          "key": "internal.switch_plate_cracked",
          "label": "Switch plate cracked or damaged?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.switch_body_moves",
          "label": "Switch body moves when touched?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.unusual_audible_sound",
          "label": "Unusual audible sound (buzz, crackle)?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.light_fitting_moves",
          "label": "Light fitting moves when lightly touched?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.lamp_type",
          "label": "Lamp type observed",
          "type": "enum",
          "enum": "lamp_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "internal.bare_wire_visible",
          "label": "Bare metal wire core visible? (photo)",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        }
      ]
    },
    {
      "id": "S3C_KITCHEN",
      "title": "Internal Installation – Kitchen (Fixed Installations)",
      "fields": [
        {
          "key": "internal.kitchen.oven_present",
          "label": "Oven present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "helper_text": "厨房固定设备：先填有无，有则继续填下方追问。",
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.oven_condition",
          "label": "Oven function / condition?",
          "type": "enum",
          "enum": "oven_condition",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.oven_present==true",
          "helper_text": "OK / fault / not tested",
          "ui": "radio"
        },
        {
          "key": "internal.kitchen.oven_dedicated_circuit",
          "label": "Oven on dedicated circuit (visible)?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.oven_present==true",
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.cooktop_present",
          "label": "Cooktop present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.cooktop_type",
          "label": "Cooktop type?",
          "type": "enum",
          "enum": "cooktop_type",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.cooktop_present==true",
          "helper_text": "Electric hotplate / Induction / Gas",
          "ui": "radio"
        },
        {
          "key": "internal.kitchen.cooktop_controls_ok",
          "label": "Buttons / knobs / controls working?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.cooktop_present==true",
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.cooktop_glass_damage",
          "label": "Glass cracked or damaged?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.cooktop_present==true",
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.kitchen.cooktop_ignition_ok",
          "label": "Gas ignition / knobs working? (if gas)",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.cooktop_present==true",
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.cooktop_grease_oil",
          "label": "Grease / oil residue on cooktop?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.cooktop_present==true",
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.kitchen.cooktop_cable_mm2",
          "label": "Supply cable size (mm²) – if electric/induction",
          "type": "number",
          "min": 0,
          "max": 25,
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.cooktop_present==true",
          "helper_text": "电热盘/电磁炉时填写；e.g. 4, 6",
          "ui": "number"
        },
        {
          "key": "internal.kitchen.cooktop_isolator_visible",
          "label": "Isolating switch visible for cooktop?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.cooktop_present==true",
          "helper_text": "电热盘/电磁炉时确认",
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.dishwasher_present",
          "label": "Dishwasher present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.dishwasher_leak",
          "label": "Dishwasher leakage (visible / reported)?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.dishwasher_present==true",
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.kitchen.dishwasher_heat_type",
          "label": "Dishwasher heating: electric or gas?",
          "type": "enum",
          "enum": "dishwasher_heat_type",
          "required": false,
          "skippable": true,
          "required_when": "internal.kitchen.dishwasher_present==true",
          "ui": "radio"
        },
        {
          "key": "internal.kitchen.dedicated_outlet_visible",
          "label": "Dedicated outlet or isolator visible (kitchen)?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.cable_distance_cooktop_mm",
          "label": "Supply cable within ___ mm of cooktop surface",
          "type": "integer",
          "min": 0,
          "max": 2000,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "internal.kitchen.power_points_above_bench",
          "label": "Number of power points above bench",
          "type": "integer",
          "min": 0,
          "max": 50,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "internal.kitchen.distance_to_sink_mm",
          "label": "Horizontal distance from power point to sink edge (mm)",
          "type": "integer",
          "min": 0,
          "max": 2000,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "internal.kitchen.range_hood_present",
          "label": "Range hood present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.kitchen.grease_residue",
          "label": "Grease residue on rangehood filter/cover?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        }
      ]
    },
    {
      "id": "S3D_BATHROOMS",
      "title": "Internal Installation – Bathrooms & Damp Areas",
      "fields": [
        {
          "key": "internal.bathroom.power_point_present",
          "label": "Power point present in bathroom?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.bathroom.light_above_bath",
          "label": "Light fitting present above bath/shower?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.bathroom.exhaust_fan_present",
          "label": "Exhaust fan present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.bathroom.heated_towel_rail",
          "label": "Heated towel rail present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.bathroom.moisture_staining",
          "label": "Moisture staining visible? (photo)",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        }
      ]
    },
    {
      "id": "S3E_LAUNDRY",
      "title": "Internal Installation – Laundry",
      "fields": [
        {
          "key": "internal.laundry.washing_machine_outlet",
          "label": "Washing machine outlet present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.laundry.dryer_outlet",
          "label": "Dryer outlet present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.laundry.outlet_height_mm",
          "label": "Outlet height above finished floor (mm)",
          "type": "integer",
          "min": 0,
          "max": 2000,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "internal.laundry.water_tap_distance_mm",
          "label": "Water tap within ___ mm of outlet",
          "type": "integer",
          "min": 0,
          "max": 2000,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "internal.laundry.extension_lead_connected",
          "label": "Extension lead connected at time of inspection?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        }
      ]
    },
    {
      "id": "S3F_ROOF_SPACE",
      "title": "Internal Installation – Roof Space / Ceiling",
      "gates": [
        {
          "depends_on": "access.roof_accessible",
          "equals": true,
          "on_false": {
            "section_status": "skipped",
            "skip_reason": "no_access"
          }
        }
      ],
      "fields": [
        {
          "key": "internal.roof.accessed",
          "label": "Roof space accessed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.roof.cable_support_method",
          "label": "Cable support method observed",
          "type": "enum",
          "enum": "cable_support_method",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "internal.roof.insulation_contact",
          "label": "Insulation contact observed?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.roof.non_modern_cable",
          "label": "Cable with non‑modern (non‑PVC) insulation?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.roof.taped_connection",
          "label": "Taped connection (non‑box) visible?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.roof.transformer_present",
          "label": "Transformer present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.roof.transformer_on_insulation",
          "label": "Transformer resting on insulation?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.roof.not_accessed_reason",
          "label": "If not accessed: reason",
          "type": "enum",
          "enum": "skip_reason",
          "required_when": "internal.roof.accessed==false",
          "skippable": true,
          "ui": "select"
        }
      ]
    },
    {
      "id": "S3G_EXTERIOR_GARAGE",
      "title": "Internal Installation – Exterior & Garage",
      "fields": [
        {
          "key": "internal.exterior.outdoor_power_point",
          "label": "Outdoor power point present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.exterior.weatherproof_cover",
          "label": "Weatherproof cover present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.exterior.cover_broken_missing",
          "label": "Cover broken or missing?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.exterior.exterior_light",
          "label": "Exterior light present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.exterior.garage_door_opener",
          "label": "Garage door opener present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.exterior.flexible_lead_fixed",
          "label": "Flexible lead fixed with clips/screws?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        }
      ]
    },
    {
      "id": "S3H_SMOKE_ALARMS",
      "title": "Internal Installation – Smoke Alarms",
      "fields": [
        {
          "key": "internal.smoke_alarm.present",
          "label": "Smoke alarm present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.smoke_alarm.location_photographed",
          "label": "Location photographed?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.smoke_alarm.type",
          "label": "Type observed",
          "type": "enum",
          "enum": "smoke_alarm_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "internal.smoke_alarm.interconnected_tested",
          "label": "Interconnected (pressing test activates others)?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.smoke_alarm.test_button_pressed",
          "label": "Test button pressed?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.smoke_alarm.alarm_sounded",
          "label": "Alarm sounded?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "internal.smoke_alarm.manufacture_date",
          "label": "Manufacture date recorded",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "text"
        },
        {
          "key": "internal.smoke_alarm.power_source",
          "label": "Power source observed",
          "type": "enum",
          "enum": "smoke_alarm_power",
          "required": false,
          "skippable": true,
          "ui": "radio"
        }
      ]
    },
    {
      "id": "S3I_GENERAL_OBSERVATIONS",
      "title": "Internal Installation – General Observations",
      "fields": [
        {
          "key": "internal.general.ceramic_fuse_holder_visible",
          "label": "Ceramic fuse holder visible?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.general.bakelite_ceramic_visible",
          "label": "Bakelite or ceramic accessory visible?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.general.non_standard_wiring",
          "label": "Non‑standard wiring or added component?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "internal.general.power_boards_count",
          "label": "Number of power boards observed",
          "type": "integer",
          "min": 0,
          "max": 99,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "internal.general.cable_damage_visible",
          "label": "Cable damage visible?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        }
      ]
    },
    {
      "id": "S9_SOLAR_BATTERY_EV",
      "title": "Renewable, Storage & High-Load – Solar / Battery / EV",
      "fields": [
        {
          "key": "assets.has_solar_pv",
          "label": "Solar PV installed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.solar.inverter_capacity_kw",
          "label": "Inverter rated capacity (kW)",
          "type": "number",
          "min": 0,
          "max": 999,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.solar.inverter_location",
          "label": "Inverter location",
          "type": "enum",
          "enum": "inverter_location",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "assets.solar.inverter_alarm",
          "label": "Inverter has alarm on screen?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "assets.solar.main_pv_isolator",
          "label": "Main PV isolator present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.solar.dc_isolator_marked",
          "label": "DC isolator marked 'DC'?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.solar.roof_isolator",
          "label": "Roof isolator present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.has_battery",
          "label": "Battery ESS installed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.battery.capacity_kwh",
          "label": "Battery capacity (kWh)",
          "type": "number",
          "min": 0,
          "max": 999,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.battery.continuous_output_kw",
          "label": "Continuous output (kW)",
          "type": "number",
          "min": 0,
          "max": 999,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.battery.isolator_present",
          "label": "Isolator present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.battery.heat_swelling_odour",
          "label": "Signs of heat/swelling/odour?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no",
          "on_issue_capture": true
        },
        {
          "key": "assets.has_ev_charger",
          "label": "EV charging equipment installed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.ev.charger_type",
          "label": "Charger type",
          "type": "enum",
          "enum": "ev_charger_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "assets.ev.rated_current_a",
          "label": "Rated current (A)",
          "type": "integer",
          "min": 0,
          "max": 200,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.ev.rated_power_kw",
          "label": "Rated power (kW)",
          "type": "number",
          "min": 0,
          "max": 350,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.ev.dedicated_circuit",
          "label": "Dedicated circuit?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.ev.local_isolator",
          "label": "Local isolator present?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.any_issues_observed",
          "label": "Any issues observed?",
          "type": "boolean",
          "required_when": "any(assets.has_solar_pv,assets.has_battery,assets.has_ev_charger)==true",
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.exceptions",
          "label": "Exceptions list",
          "type": "array_object",
          "required_when": "assets.any_issues_observed==true",
          "skippable": true,
          "item_schema": {
            "asset_type": {
              "type": "enum",
              "enum_values": [
                "solar",
                "battery",
                "ev"
              ],
              "required": true
            },
            "issue": {
              "type": "string",
              "required": true
            },
            "notes": {
              "type": "string",
              "required": false
            },
            "photo_ids": {
              "type": "array_string",
              "required": false
            }
          },
          "ui": "repeatable_card"
        },
        {
          "key": "assets.notes",
          "label": "Notes / Photo IDs",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        }
      ],
      "section_auto_skip": {
        "when": "any(assets.has_solar_pv,assets.has_battery,assets.has_ev_charger)==false",
        "set": {
          "status": "skipped",
          "skip_reason": "not_applicable"
        },
        "clear_paths": [
          "assets.any_issues_observed",
          "assets.exceptions",
          "assets.notes"
        ]
      },
      "clear_on_gate_change": [
        {
          "if_changed": "assets.has_solar_pv",
          "from": true,
          "to": false,
          "clear_paths": [
            "assets.exceptions"
          ]
        },
        {
          "if_changed": "assets.has_battery",
          "from": true,
          "to": false,
          "clear_paths": [
            "assets.exceptions"
          ]
        },
        {
          "if_changed": "assets.has_ev_charger",
          "from": true,
          "to": false,
          "clear_paths": [
            "assets.exceptions"
          ]
        }
      ]
    },
    {
      "id": "S9B_POOL_HIGH_LOAD",
      "title": "Renewable & High-Load – Pool, Cooktop, Hot Water, AC",
      "fields": [
        {
          "key": "assets.pool_installed",
          "label": "Swimming pool / spa equipment installed?",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.pool.pump_motor_kw",
          "label": "Pump motor rated power (kW)",
          "type": "number",
          "min": 0,
          "max": 50,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.pool.heater_kw",
          "label": "Pool heater rated power (kW)",
          "type": "number",
          "min": 0,
          "max": 50,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.pool.dedicated_circuit",
          "label": "Dedicated circuit identified?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.pool.rcd_protection",
          "label": "RCD protection indicated?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        },
        {
          "key": "assets.cooktop.power_kw",
          "label": "Electric cooktop rated power (kW)",
          "type": "number",
          "min": 0,
          "max": 50,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.hot_water.type",
          "label": "Hot water system type",
          "type": "enum",
          "enum": "hot_water_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "assets.hot_water.power_kw",
          "label": "Hot water system rated power (kW)",
          "type": "number",
          "min": 0,
          "max": 50,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.ac.type",
          "label": "Air-conditioning type",
          "type": "enum",
          "enum": "ac_type",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "assets.ac.electrical_input_kw",
          "label": "Air-conditioning electrical input (kW)",
          "type": "number",
          "min": 0,
          "max": 50,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "assets.dedicated_circuits",
          "label": "Dedicated circuit(s) for high-load equipment?",
          "type": "boolean",
          "required": false,
          "skippable": true,
          "ui": "radio_yes_no"
        }
      ]
    },
    {
      "id": "S5A_MEASURED_DATA",
      "title": "Measured & Test Data (Mandatory / Conditional)",
      "fields": [
        {
          "key": "measured.supply_voltage_l1_noload",
          "label": "Supply voltage L1 no-load (V)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.supply_voltage_l1_load",
          "label": "Supply voltage L1 load (V)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.supply_voltage_l2_noload",
          "label": "Supply voltage L2 no-load (V)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.supply_voltage_l2_load",
          "label": "Supply voltage L2 load (V)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.supply_voltage_l3_noload",
          "label": "Supply voltage L3 no-load (V)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.supply_voltage_l3_load",
          "label": "Supply voltage L3 load (V)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.load_current_l1",
          "label": "Load current L1 (A)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.load_current_l2",
          "label": "Load current L2 (A)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.load_current_l3",
          "label": "Load current L3 (A)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.load_current_neutral",
          "label": "Load current Neutral (A)",
          "type": "number",
          "min": 0,
          "max": 500,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.earth_resistance_ohm",
          "label": "Earth resistance (Ω)",
          "type": "number",
          "min": 0,
          "max": 999,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.earth_test_method",
          "label": "Earth test method",
          "type": "enum",
          "enum": "earth_test_method",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "measured.men_continuity",
          "label": "MEN continuity",
          "type": "enum",
          "enum": "rcd_exception_result",
          "required": false,
          "skippable": true,
          "ui": "radio"
        },
        {
          "key": "measured.main_earthing_conductor_size_mm2",
          "label": "Main earthing conductor size (mm²)",
          "type": "number",
          "min": 0,
          "max": 200,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.thermal_ambient_temp",
          "label": "Thermal imaging – Ambient temp (°C)",
          "type": "number",
          "min": -20,
          "max": 60,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.thermal_max_main_switch_temp",
          "label": "Thermal – Max main switch temp (°C)",
          "type": "number",
          "min": -20,
          "max": 100,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.thermal_delta_t",
          "label": "Thermal – ΔT (°C)",
          "type": "number",
          "min": 0,
          "max": 100,
          "required": false,
          "skippable": true,
          "ui": "number"
        },
        {
          "key": "measured.insulation_resistance_mohm",
          "label": "Insulation resistance (MΩ)",
          "type": "number",
          "min": 0,
          "max": 9999,
          "required": false,
          "skippable": true,
          "ui": "number"
        }
      ]
    },
    {
      "id": "S6_EXCEPTIONS_COMPLETION",
      "title": "Exceptions, Client Statements & Completion",
      "fields": [
        {
          "key": "exceptions.observed_exceptions",
          "label": "Observed exceptions (describe only)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        },
        {
          "key": "exceptions.client_previous_issues",
          "label": "Client statements – Previous issues (verbatim)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        },
        {
          "key": "exceptions.client_concerns",
          "label": "Client statements – Client concerns (verbatim)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        },
        {
          "key": "exceptions.completion_all_items",
          "label": "All checklist items completed",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "exceptions.completion_photos_uploaded",
          "label": "All required photos uploaded",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "exceptions.completion_no_advice",
          "label": "No advice or quotations provided",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        }
      ]
    },
    {
      "id": "S10_SIGNOFF",
      "title": "Technician Sign-off",
      "fields": [
        {
          "key": "signoff.technician_name",
          "label": "Technician name",
          "type": "string",
          "required": true,
          "skippable": false,
          "ui": "text"
        },
        {
          "key": "signoff.licence_no",
          "label": "Licence number (optional)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "text"
        },
        {
          "key": "signoff.inspection_date",
          "label": "Inspection date (DD/MM/YYYY)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "text"
        },
        {
          "key": "signoff.inspection_completed",
          "label": "Inspection completed",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "signoff.customer_informed_immediate",
          "label": "Customer informed of any immediate concerns",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "radio_yes_no"
        },
        {
          "key": "signoff.office_notes_internal",
          "label": "Notes to office (internal)",
          "type": "string",
          "required": false,
          "skippable": true,
          "ui": "textarea"
        },
        {
          "key": "signoff.ready_for_report_generation",
          "label": "Ready for report generation",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        },
        {
          "key": "signoff.submit_confirm",
          "label": "Confirm submit",
          "type": "boolean",
          "required": true,
          "skippable": false,
          "ui": "checkbox"
        }
      ]
    }
  ],
  "api": {
    "submit_endpoint": {
      "method": "POST",
      "path": "/api/submitInspection",
      "request_content_type": "application/json",
      "response_example": {
        "inspection_id": "EH-YYYY-XXXX",
        "status": "accepted",
        "review_url": "/review/EH-YYYY-XXXX"
      }
    }
  }
}