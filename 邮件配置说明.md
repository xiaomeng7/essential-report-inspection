# 邮件通知配置说明

提交检查后，系统会向 **info@bhtechnology.com.au** 发送邮件。需要配置 [Resend](https://resend.com) 才能实际发送。

## 1. 注册 Resend

1. 访问 https://resend.com 并注册
2. 进入 **API Keys**：https://resend.com/api-keys
3. 点击 **Create API Key**，复制生成的 key（格式 `re_xxxx...`）

## 2. 验证发件域名（必做）

Resend 要求发件地址使用**已验证的域名**：

1. 在 Resend 控制台进入 **Domains**
2. 添加域名，例如 `bhtechnology.com.au` 或子域 `inspection.bhtechnology.com.au`
3. 按提示添加提供的 DNS 记录（MX、TXT 等）到域名解析
4. 验证通过后，可使用该域名下的邮箱作为发件地址，例如：
   - `reports@bhtechnology.com.au`
   - `inspection@bhtechnology.com.au`

## 3. 在 Netlify 配置环境变量

1. 打开 Netlify Dashboard → 你的站点 → **Site configuration** → **Environment variables**
2. 添加变量：

| 变量名 | 值 | 说明 |
|--------|-----|------|
| `RESEND_API_KEY` | `re_xxxx...` | 你的 Resend API Key |
| `RESEND_FROM` | `Electrical Inspection <reports@bhtechnology.com.au>` | 发件人（需为已验证域名下的邮箱） |

如不设置 `RESEND_FROM`，默认使用 `onboarding@resend.dev`（仅可发往你 Resend 账号邮箱，用于测试）。

## 4. 重新部署

保存环境变量后，在 Netlify 点击 **Trigger deploy** → **Deploy site**，使新配置生效。

## 5. 验证

提交一条检查，检查 **info@bhtechnology.com.au** 是否收到邮件。未收到时，可到 Netlify **Functions** → **submitInspection** → **Logs** 查看是否有 “Email sent via Resend” 或报错信息。

## 常见问题

- **收不到邮件**：确认 `RESEND_API_KEY`、`RESEND_FROM` 已设置且已重新部署；发件域名已在 Resend 完成验证。
- **提示 "Email send failed"**：查看 Function 日志中的 Resend 错误信息；常见原因包括 API Key 无效、发件域名未验证或格式错误。
